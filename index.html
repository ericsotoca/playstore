<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mes Applications</title>
    <style>
        /* --- Variables CSS --- */
        :root {
            --primary-color: #4285f4;
            --secondary-color: #34a853;
            --text-color: #333;
            --bg-light: #f8f9fa;
            --card-shadow: 0 2px 5px rgba(0,0,0,0.1);
            --card-hover-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* --- Styles Généraux --- */
        body {
            font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, sans-serif;
            margin: 0;
            padding: 0;
            color: var(--text-color);
            background-color: var(--bg-light);
            line-height: 1.6;
        }

        /* --- Header --- */
        header {
            background-color: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 1rem;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid #eee;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            cursor: pointer;
            text-decoration: none;
        }

        .search-bar {
            flex-grow: 1;
            margin: 0 2rem;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 24px;
            border: 1px solid #ddd;
            font-size: 1rem;
            box-sizing: border-box;
        }

        /* --- Main Content --- */
        main {
            max-width: 1200px;
            margin: 1.5rem auto;
            padding: 1rem;
        }

        /* --- Catégories --- */
        .categories {
            display: flex;
            overflow-x: auto;
            gap: 1rem;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            -webkit-overflow-scrolling: touch;
        }

        .category {
            padding: 0.5rem 1rem;
            background-color: white;
            border-radius: 20px;
            white-space: nowrap;
            cursor: pointer;
            border: 1px solid #ddd;
            transition: background-color 0.2s, color 0.2s, border-color 0.2s;
            font-size: 0.9rem;
        }

        .category:hover {
            background-color: #f0f0f0;
        }

        .category.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* --- Grille d'Applications --- */
        .apps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1.5rem;
        }

        /* --- Carte d'Application --- */
        .app-card {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
            cursor: pointer;
            display: flex;
            flex-direction: column;
        }

        .app-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--card-hover-shadow);
        }

        .app-icon {
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #e9f0fe;
            overflow: hidden;
            flex-shrink: 0;
        }

        .app-icon img {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
            object-position: center;
        }

        .app-info {
            padding: 1rem;
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .app-name {
            font-weight: bold;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
            color: var(--text-color);
        }

        .app-meta {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
            color: #666;
        }

        .tech-tag, .license-tag {
            padding: 0.25rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
            line-height: 1.2;
        }

        .tech-tag {
            background-color: #f0f0f0;
        }

        .tech-html { background-color: #e34c26; color: white; }
        .tech-js { background-color: #f7df1e; color: black; }

        .license-tag {
            background-color: #e0e0e0;
            margin-left: auto;
        }

        .app-description {
            color: #555;
            font-size: 0.9rem;
            margin-bottom: 1rem;
            flex-grow: 1;
        }

        .update-info {
            font-size: 0.8rem;
            color: #999;
            margin-top: auto;
            padding-top: 0.5rem;
        }

        /* --- Modale --- */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            box-sizing: border-box;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            position: relative;
            background: linear-gradient(135deg, #ffffff, #f0f4ff);
            border-radius: 12px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 8px 30px rgba(0,0,0,0.2);
            padding: 2rem;
            animation: fadeInScale 0.3s ease-out;
        }

        @keyframes fadeInScale {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 1.8rem;
            line-height: 1;
            cursor: pointer;
            color: #888;
            transition: color 0.2s, transform 0.2s;
        }

        .close-modal:hover {
            color: var(--primary-color);
            transform: scale(1.1);
        }

        .modal-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem; /* Espace avant l'image */
            border-bottom: 1px solid #eee;
            padding-bottom: 1rem;
            gap: 1.5rem;
        }

        .modal-icon {
            width: 80px;
            height: 80px;
            border-radius: 12px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border: 2px solid #ddd;
            background-color: #fff;
        }

        .modal-icon img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            object-position: center;
        }

        .modal-app-info {
            flex-grow: 1;
        }

        .modal-app-info h2 {
            margin: 0 0 0.5rem 0;
            font-size: 1.8rem;
            color: var(--primary-color);
            line-height: 1.3;
        }

        .modal-tech-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .modal-tech-tags .tech-tag, .modal-tech-tags .license-tag {
             padding: 0.25rem 0.6rem;
             border-radius: 12px;
             font-size: 0.8rem;
             line-height: 1.2;
        }
        .modal-tech-tags .license-tag { margin-left: 0; }

        /* --- Styles pour l'image d'aperçu dans la modale --- */
        .modal-preview-image {
            margin-bottom: 1.5rem; /* Espace avant la description */
            text-align: center;
            background-color: #f0f0f0;
            border-radius: 8px;
            overflow: hidden;
        }

        #modalImagePreview {
            display: block;
            max-width: 100%;
            height: auto;
            max-height: 45vh; /* Limite la hauteur */
            object-fit: contain; /* Ou 'cover' si tu préfères remplir */
            object-position: center;
            margin: 0 auto;
            border-radius: 6px;
        }

        /* Cache le conteneur si l'image n'est pas définie (géré par JS) */
        .modal-preview-image.hidden {
            display: none;
        }
        /* Fin styles image aperçu */


        .modal-description {
            line-height: 1.7;
            margin-bottom: 2rem;
            color: #444;
            font-size: 1rem;
        }

        .modal-actions {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
        }

        /* --- Boutons --- */
        .btn {
            display: inline-block;
            padding: 0.75rem 2rem;
            border-radius: 25px;
            border: none;
            cursor: pointer;
            font-weight: 500;
            font-size: 1rem;
            transition: background-color 0.3s, transform 0.2s, box-shadow 0.2s;
            text-decoration: none;
            text-align: center;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            color: white;
            box-shadow: 0 2px 5px rgba(0, 100, 255, 0.3);
        }

        .btn-primary:hover, .btn-primary:focus {
            background: linear-gradient(45deg, #3367d6, #2e8b43);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 100, 255, 0.4);
            outline: none;
        }

        /* --- Footer --- */
        footer {
            text-align: center;
            padding: 2rem 1rem;
            background-color: white;
            margin-top: 2rem;
            border-top: 1px solid #eee;
            font-size: 0.9rem;
            color: #666;
        }

        /* --- Responsive --- */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }

            .search-bar {
                width: 100%;
                margin: 0.5rem 0 0 0;
            }

            main {
                margin-top: 1rem;
            }

            .apps-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
                gap: 1rem;
            }

            .modal-content {
                padding: 1.5rem;
                max-height: 85vh;
            }

            .modal-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
                 margin-bottom: 1rem; /* Réduit marge si image suit */
                 padding-bottom: 1rem;
                 border-bottom: none; /* Enlève la ligne ici, l'image fait séparation */
            }
             /* Optionnel: Ajouter une ligne après l'en-tête si pas d'image */
             .modal-preview-image.hidden + .modal-description {
                  margin-top: -0.5rem; /* Compense l'absence de marge bottom de l'header */
                  padding-top: 1.5rem;
                  border-top: 1px solid #eee;
             }


            .modal-icon {
                width: 60px;
                height: 60px;
                margin-right: 0;
                align-self: flex-start;
            }

            .modal-app-info h2 {
                font-size: 1.6rem;
            }

            .modal-description {
                font-size: 0.95rem;
            }

             .btn {
                 padding: 0.7rem 1.5rem;
                 font-size: 0.95rem;
             }
             #modalImagePreview {
                 max-height: 40vh; /* Un peu moins haut sur mobile */
             }
        }

         @media (max-width: 480px) {
             .apps-grid {
                 grid-template-columns: 1fr;
             }
             .logo { font-size: 1.3rem; }
             .search-bar input { font-size: 0.9rem; }
             .category { font-size: 0.85rem; padding: 0.4rem 0.8rem; }
              #modalImagePreview {
                  max-height: 35vh; /* Encore moins haut sur petit écran */
              }
         }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="logo" id="homeLink" title="Retour à l'accueil">My App Store</div>
            <div class="search-bar">
                <input type="text" placeholder="Rechercher une application..." id="searchInput">
            </div>
        </div>
    </header>

    <main>
        <div class="categories">
            <!-- Catégories (la première est active par défaut) -->
            <div class="category active" data-category="all">Tous</div>
            <div class="category" data-category="musique">Musique</div>
            <div class="category" data-category="developpement">Développement personnel</div>
            <div class="category" data-category="jeux">Jeux</div>
        </div>

        <div class="apps-grid" id="appsGrid">
            <!-- Les cartes d'application seront générées ici par JavaScript -->
        </div>
    </main>

    <!-- Modale pour afficher les détails de l'application -->
    <div id="appModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" id="closeModal" title="Fermer">×</span>
            <div class="modal-header">
                <div class="modal-icon" id="modalIcon">
                    <!-- L'icône de l'app sera chargée ici -->
                </div>
                <div class="modal-app-info">
                    <h2 id="modalTitle">Nom de l'application</h2>
                    <div class="modal-tech-tags" id="modalTechTags">
                        <!-- Les tags techniques seront chargés ici -->
                    </div>
                </div>
            </div>

            <!-- Conteneur pour l'image d'aperçu -->
            <div class="modal-preview-image hidden" id="modalImagePreviewContainer">
                 <!-- Image chargée par JS -->
                <img id="modalImagePreview" src="" alt="Aperçu de l'application" loading="lazy">
            </div>

            <div class="modal-description" id="modalDescription">
                La description complète de l'application sera chargée ici...
            </div>
            <div class="modal-actions">
                <a id="startAppBtn" href="#" target="_blank" rel="noopener noreferrer" class="btn btn-primary">Démarrer l'application</a>
            </div>
        </div>
    </div>

    <footer>
        © <span id="copyright-year"></span> My App Store - Tous droits réservés
    </footer>

    <script defer>
        // --- Données des Applications ---
        // IMPORTANT: Mettez à jour les chemins `image` (icône) et `previewImage` (aperçu)
        // pour qu'ils correspondent à l'emplacement de vos fichiers sur GitHub Pages.
        const apps = [
            {
                id: 'siestefm',
                name: 'Sieste FM',
                tech: ['html'],
                category: 'musique',
                description: 'Sieste FM est une webradio conçue pour favoriser la relaxation et la méditation. Elle propose une sélection de musiques apaisantes, telles que "Blues in the Light of Dawn", pour créer une ambiance propice au repos. L\'application inclut des options de minuterie (10, 15, 30 minutes ou illimité) pour programmer une sieste, ainsi qu\'une fonction d\'alarme musicale pour un réveil en douceur. Parfaite pour une pause détente à tout moment de la journée.',
                updated: 'Il y a 10 heures',
                demoUrl: 'https://ericsotoca.github.io/SiesteFM',
                sourceUrl: 'https://ericsotoca.github.io/SiesteFM',
                image: 'images/logo_siestefm.png', // Icône pour la carte et header modale
                previewImage: 'images/siestefm_preview.png', // Image d'aperçu pour la modale
                license: null
            },
            {
                id: 'sotocawebradio',
                name: 'SOTOCA WebRadio',
                tech: ['javascript'],
                category: 'musique',
                description: 'SOTOCA WebRadio est une application de webradio personnalisable qui offre une large variété de stations pour répondre à tous les goûts musicaux. Que vous préfériez des sons calmes et puissants, des rythmes entraînants ou des mélodies spirituelles comme "Maylo" par Jensetis der Grenzen, cette webradio vous permet de choisir parmi des catégories telles que "Horizon Infini", "Calme Puissant", "Esprit Aiguisé", et "Quête Sauvage". Une expérience musicale immersive pour toutes les humeurs.',
                updated: 'Il y a 20 heures',
                demoUrl: 'https://ericsotoca.github.io/webradio',
                sourceUrl: 'https://ericsotoca.github.io/webradio',
                image: 'images/logo_sotocawebradio.png',
                previewImage: 'images/sotocawebradio_preview.png', // REMPLACER par le vrai chemin
                license: null
            },
            {
                id: 'larouedelavie',
                name: 'La Roue de la Vie',
                tech: ['javascript'],
                category: 'developpement',
                description: 'La Roue de la Vie est un outil interactif conçu pour vous aider à évaluer et équilibrer les différents aspects de votre vie personnelle. À travers une interface intuitive, vous pouvez noter des domaines clés tels que la santé physique, le mental, et d\'autres aspects de votre bien-être sur une échelle de 1 à 10. L\'application génère une visualisation graphique sous forme de roue, vous permettant d\'identifier les déséquilibres et de définir des objectifs pour améliorer votre épanouissement global.',
                updated: 'Il y a 20 heures',
                demoUrl: 'https://ericsotoca.github.io/larouedelavie',
                sourceUrl: 'https://ericsotoca.github.io/larouedelavie',
                image: 'images/logo_larouedelavie.png',
                previewImage: 'images/larouedelavie_preview.png', // REMPLACER par le vrai chemin
                license: null
            },
            {
                id: 'danslatetedunchampion',
                name: 'Dans la Tête d\'un Champion',
                tech: ['html'],
                category: 'jeux',
                description: 'Dans la Tête d\'un Champion est un jeu de réflexion et de stratégie qui met à l\'épreuve vos compétences cognitives et tactiques. Inspiré des jeux télévisés, il propose des défis où vous devez sélectionner et placer des réponses dans une grille pour accumuler des points. Avec des options de mise (75% ou 100% des gains), des statistiques de réussite (par exemple, 89%), et des historiques de parties, ce jeu offre une expérience immersive pour les amateurs de quiz et de challenges intellectuels.',
                updated: 'Il y a 4 jours',
                demoUrl: 'https://ericsotoca.github.io/awale',
                sourceUrl: 'https://ericsotoca.github.io/awale',
                image: 'images/logo_danslatetedunchampion.png',
                previewImage: 'images/danslatetedunchampion_preview.png', // REMPLACER par le vrai chemin
                license: null
            }
        ];

        // --- Éléments du DOM ---
        const appsGrid = document.getElementById('appsGrid');
        const searchInput = document.getElementById('searchInput');
        const categoryButtons = document.querySelectorAll('.category');
        const homeLink = document.getElementById('homeLink');
        const modal = document.getElementById('appModal');
        const closeModalBtn = document.getElementById('closeModal');
        const modalIcon = document.getElementById('modalIcon');
        const modalTitle = document.getElementById('modalTitle');
        const modalTechTags = document.getElementById('modalTechTags');
        const modalDescription = document.getElementById('modalDescription');
        const startAppBtn = document.getElementById('startAppBtn');
        const copyrightYearSpan = document.getElementById('copyright-year');
        // Éléments pour l'image d'aperçu
        const modalImagePreview = document.getElementById('modalImagePreview');
        const modalImagePreviewContainer = document.getElementById('modalImagePreviewContainer');

        // --- Fonctions ---

        // Génère les cartes d'application
        function generateAppCards(appsToShow) {
            appsGrid.innerHTML = '';
            if (appsToShow.length === 0) {
                 appsGrid.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: #777;">Aucune application trouvée.</p>';
                 return;
            }

            appsToShow.forEach(app => {
                const appCard = document.createElement('div');
                appCard.className = 'app-card';
                appCard.dataset.id = app.id;

                let techTagsHTML = app.tech.map(tech => {
                    let techClass = '', techName = '';
                    switch (tech.toLowerCase()) {
                        case 'html': techClass = 'tech-html'; techName = 'HTML'; break;
                        case 'javascript': case 'js': techClass = 'tech-js'; techName = 'JavaScript'; break;
                        default: techClass = ''; techName = tech;
                    }
                    return `<span class="tech-tag ${techClass}">${techName}</span>`;
                }).join('');

                let licenseTagHTML = app.license ? `<span class="license-tag">${app.license}</span>` : '';
                const shortDescription = app.description.length > 90 ? app.description.substring(0, 90) + '...' : app.description;

                appCard.innerHTML = `
                    <div class="app-icon">
                        <img src="${app.image}" alt="Icône ${app.name}" loading="lazy">
                    </div>
                    <div class="app-info">
                        <div class="app-name">${app.name}</div>
                        <div class="app-meta">
                            ${techTagsHTML}
                            ${licenseTagHTML}
                        </div>
                        <div class="app-description">${shortDescription}</div>
                        <div class="update-info">Mis à jour ${app.updated}</div>
                    </div>
                `;
                appCard.addEventListener('click', () => openAppModal(app));
                appsGrid.appendChild(appCard);
            });
        }

        // Filtre par catégorie
        function filterAppsByCategory(category) {
            return category === 'all' ? apps : apps.filter(app => app.category === category);
        }

        // Filtre par recherche
        function filterAppsBySearch(term) {
            const lowerCaseTerm = term.toLowerCase().trim();
            if (!lowerCaseTerm) return apps;
            return apps.filter(app =>
                app.name.toLowerCase().includes(lowerCaseTerm) ||
                app.description.toLowerCase().includes(lowerCaseTerm) ||
                app.tech.some(tech => tech.toLowerCase().includes(lowerCaseTerm))
            );
        }

        // Ouvre la modale
        function openAppModal(app) {
            // Contenu standard
            modalIcon.innerHTML = `<img src="${app.image}" alt="Icône ${app.name}">`;
            modalTitle.textContent = app.name;
            modalDescription.textContent = app.description;
            startAppBtn.href = app.demoUrl;

            // Tags techniques
            modalTechTags.innerHTML = app.tech.map(tech => {
                 let techClass = '', techName = '';
                 switch (tech.toLowerCase()) {
                    case 'html': techClass = 'tech-html'; techName = 'HTML'; break;
                    case 'javascript': case 'js': techClass = 'tech-js'; techName = 'JavaScript'; break;
                    default: techClass = ''; techName = tech;
                 }
                return `<span class="tech-tag ${techClass}">${techName}</span>`;
            }).join('');

            // Tag licence
            if (app.license) {
                const licenseTag = document.createElement('span');
                licenseTag.className = 'license-tag';
                licenseTag.textContent = app.license;
                modalTechTags.appendChild(licenseTag);
            }

            // Gère l'image d'aperçu
            if (app.previewImage && app.previewImage.trim() !== '') {
                modalImagePreview.src = app.previewImage;
                modalImagePreview.alt = `Aperçu de ${app.name}`;
                modalImagePreviewContainer.classList.remove('hidden'); // Rend visible
            } else {
                modalImagePreview.src = ''; // Efface source précédente
                modalImagePreview.alt = '';
                modalImagePreviewContainer.classList.add('hidden'); // Cache le conteneur
            }

            modal.classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        // Ferme la modale
        function closeAppModal() {
            modal.classList.remove('show');
            document.body.style.overflow = '';
             // Optionnel: Réinitialiser l'image pour libérer mémoire / éviter flash
             modalImagePreview.src = '';
             modalImagePreviewContainer.classList.add('hidden');
        }

        // Met à jour l'année du copyright
        function updateCopyrightYear() {
            if (copyrightYearSpan) {
                copyrightYearSpan.textContent = new Date().getFullYear();
            }
        }

        // --- Écouteurs d'Événements ---

        // Catégories
        categoryButtons.forEach(button => {
            button.addEventListener('click', () => {
                document.querySelector('.category.active').classList.remove('active');
                button.classList.add('active');
                const selectedCategory = button.dataset.category;
                searchInput.value = '';
                generateAppCards(filterAppsByCategory(selectedCategory));
            });
        });

        // Accueil (logo)
        homeLink.addEventListener('click', () => {
            document.querySelector('.category.active').classList.remove('active');
            document.querySelector('.category[data-category="all"]').classList.add('active');
            searchInput.value = '';
            generateAppCards(apps);
        });

        // Recherche (avec debounce)
        let searchTimeout;
        searchInput.addEventListener('input', () => {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                const searchTerm = searchInput.value;
                 document.querySelector('.category.active')?.classList.remove('active'); // Optionnel: désélectionne cat.
                 document.querySelector('.category[data-category="all"]')?.classList.add('active'); // Sélectionne 'Tous'
                 generateAppCards(filterAppsBySearch(searchTerm));
            }, 250);
        });

        // Fermeture modale (bouton, overlay, Echap)
        closeModalBtn.addEventListener('click', closeAppModal);
        modal.addEventListener('click', (event) => {
            if (event.target === modal) closeAppModal();
        });
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape' && modal.classList.contains('show')) closeAppModal();
        });


        // --- Initialisation ---
        updateCopyrightYear();
        generateAppCards(apps); // Affichage initial

    </script>
</body>
</html>
